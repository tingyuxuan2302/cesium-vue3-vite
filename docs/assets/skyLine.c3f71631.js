var d=Object.defineProperty;var p=(o,e,t)=>e in o?d(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var n=(o,e,t)=>(p(o,typeof e!="symbol"?e+"":e,t),t);import{_ as f}from"./OperateBox.0986405a.js";import{C as x,a as h,o as C,c as g,w as a,d as u,e as c}from"./index.fe5814f1.js";import{E as _}from"./el-button.af2fec77.js";class v{constructor(e){n(this,"skylineAnayStages",null);n(this,"silhouette",null);this.viewer=e}open(){if(this.skylineAnayStages){this.silhouette.enabled=!0;return}this.skylineAnayStages=this.viewer.scene.postProcessStages;let e=Cesium.PostProcessStageLibrary.createEdgeDetectionStage(),t=new Cesium.PostProcessStage({fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D depthTexture;in vec2 v_textureCoordinates;out vec4 fragColor;void main(void){float depth = czm_readDepth(depthTexture, v_textureCoordinates);vec4 color = texture(colorTexture, v_textureCoordinates);if(depth<1.0 - 0.000001){fragColor = color;}else{fragColor = vec4(1.0,0.0,0.0,1.0);}}"}),s=new Cesium.PostProcessStage({fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D redTexture;uniform sampler2D silhouetteTexture;in vec2 v_textureCoordinates;out vec4 fragColor;void main(void){vec4 redcolor=texture(redTexture, v_textureCoordinates);vec4 silhouetteColor = texture(silhouetteTexture, v_textureCoordinates);vec4 color = texture(colorTexture, v_textureCoordinates);if(redcolor.r == 1.0){fragColor = mix(color, vec4(5.0,0.0,0.0,1.0), silhouetteColor.a);}else{fragColor = color;}}",uniforms:{redTexture:t.name,silhouetteTexture:e.name}});this.silhouette=new Cesium.PostProcessStageComposite({stages:[e,t,s],inputPreviousStageTexture:!1,uniforms:e.uniforms}),this.skylineAnayStages.add(this.silhouette)}close(){this.silhouette.enabled=!1}}const w={__name:"skyLine",setup(o){const{viewer:e}=window;let t;x(async()=>{e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(120.58193064609729,36.125460378632766,200),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(0),roll:0},duration:3})});const s=async()=>{t=new v(e),t.open()},i=()=>{t.close()};return h(()=>{i()}),(y,r)=>{const l=_,m=f;return C(),g(m,null,{default:a(()=>[u(l,{onClick:s,type:"primary"},{default:a(()=>r[0]||(r[0]=[c("\u6253\u5F00\u5929\u9645\u7EBF")])),_:1}),u(l,{onClick:i,type:"primary"},{default:a(()=>r[1]||(r[1]=[c("\u5173\u95ED\u5929\u9645\u7EBF")])),_:1})]),_:1})}}};export{w as default};
