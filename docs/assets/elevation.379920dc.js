import{_ as N}from"./OperateBox.66cb383c.js";import{u as M,D as U,a as E,o as V,c as D,w as C,d as k,e as v,Y as e}from"./index.bc967ea1.js";import{E as H}from"./el-button.3d1567a4.js";const I={__name:"elevation",setup(O){const P=M(),{viewer:u}=P.state;u.camera.setView({destination:Cesium.Cartesian3.fromDegrees(120.58193064609729,36.125460378632766,2e3),orientation:{heading:4.747266966349747,pitch:-.2206998858596192,roll:6.280340554587955}});const o={gradient:!1,band1Position:300,band2Position:500,band3Position:1e3,bandThickness:100,bandTransparency:.5,backgroundTransparency:.75};U(()=>{Cesium.knockout.track(o);const c=document.getElementById("toolBar");Cesium.knockout.applyBindings(o,c);for(const n in o)o.hasOwnProperty(n)&&Cesium.knockout.getObservable(o,n).subscribe(b);u.scene.terrainProvider=new Cesium.CesiumTerrainProvider({url:"http://data.marsgis.cn/terrain"})}),E(()=>{g(),u.scene.terrainProvider=new Cesium.EllipsoidTerrainProvider({})});const b=()=>{const c=Boolean(o.gradient),n=Number(o.band1Position),i=Number(o.band2Position),r=Number(o.band3Position),t=Number(o.bandThickness),a=Number(o.bandTransparency),p=Number(o.backgroundTransparency),s=[],B={entries:[{height:200,color:new Cesium.Color(0,0,.2,p)},{height:800,color:new Cesium.Color(1,1,1,p)},{height:1500,color:new Cesium.Color(1,0,0,p)}],extendDownwards:!0,extendUpwards:!0};s.push(B);const T=200,_=1500,w=50;for(let l=0;l<w;l++){const m=l/(w-1),h=Cesium.Math.lerp(T,_,m),x=h+10,y=Cesium.Math.lerp(.2,.4,m)*p;s.push({entries:[{height:h,color:new Cesium.Color(1,1,1,y)},{height:x,color:new Cesium.Color(1,1,1,y)}]})}const d=Math.min(10,t*.1);if(c){const l={entries:[{height:n-t*.5,color:new Cesium.Color(0,0,1,a)},{height:i,color:new Cesium.Color(0,1,0,a)},{height:r+t*.5,color:new Cesium.Color(1,0,0,a)}]};s.push(l)}else{const l={entries:[{height:n-t*.5-d,color:new Cesium.Color(0,0,1,0)},{height:n-t*.5,color:new Cesium.Color(0,0,1,a)},{height:n+t*.5,color:new Cesium.Color(0,0,1,a)},{height:n+t*.5+d,color:new Cesium.Color(0,0,1,0)}]},m={entries:[{height:i-t*.5-d,color:new Cesium.Color(0,1,0,0)},{height:i-t*.5,color:new Cesium.Color(0,1,0,a)},{height:i+t*.5,color:new Cesium.Color(0,1,0,a)},{height:i+t*.5+d,color:new Cesium.Color(0,1,0,0)}]},h={entries:[{height:r-t*.5-d,color:new Cesium.Color(1,0,0,0)},{height:r-t*.5,color:new Cesium.Color(1,0,0,a)},{height:r+t*.5,color:new Cesium.Color(1,0,0,a)},{height:r+t*.5+d,color:new Cesium.Color(1,0,0,0)}]};s.push(l),s.push(m),s.push(h)}const f=Cesium.createElevationBandMaterial({scene:u.scene,layers:s});u.scene.globe.material=f},g=()=>{u.scene.globe.material=null};return(c,n)=>{const i=H,r=N;return V(),D(r,null,{default:C(()=>[k(i,{type:"primary",onClick:b},{default:C(()=>n[0]||(n[0]=[v("\u5F00\u59CB\u5206\u6790")])),_:1}),k(i,{type:"primary",onClick:g},{default:C(()=>n[1]||(n[1]=[v("\u7ED3\u675F\u5206\u6790")])),_:1}),n[2]||(n[2]=e("div",{id:"toolBar"},[e("table",null,[e("tbody",null,[e("tr",null,[e("td",null,"Background Transparency"),e("td",null,[e("input",{type:"range",min:"0.0",max:"1.0",step:"0.01","data-bind":"value: backgroundTransparency, valueUpdate: 'input'"})])]),e("tr",null,[e("td",null,"Band Transparency"),e("td",null,[e("input",{type:"range",min:"0.0",max:"1.0",step:"0.01","data-bind":"value: bandTransparency, valueUpdate: 'input'"})])]),e("tr",null,[e("td",null,"Band Thickness"),e("td",null,[e("input",{type:"range",min:"10",max:"1000",step:"1","data-bind":"value: bandThickness, valueUpdate: 'input'"})])]),e("tr",null,[e("td",null,"Band 1 Position"),e("td",null,[e("input",{type:"range",min:"200",max:"1500",step:"1","data-bind":"value: band1Position, valueUpdate: 'input'"})])]),e("tr",null,[e("td",null,"Band 2 Position"),e("td",null,[e("input",{type:"range",min:"200",max:"1500",step:"1","data-bind":"value: band2Position, valueUpdate: 'input'"})])]),e("tr",null,[e("td",null,"Band 3 Position"),e("td",null,[e("input",{type:"range",min:"200",max:"1500",step:"1","data-bind":"value: band3Position, valueUpdate: 'input'"})])]),e("tr",null,[e("td",null,"Gradient"),e("td",null,[e("input",{type:"checkbox","data-bind":"checked: gradient"})])])])])],-1))]),_:1})}}};export{I as default};
