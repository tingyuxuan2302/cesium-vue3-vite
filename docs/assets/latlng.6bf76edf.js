const{__viewer:f}=window,o={};o.getCurrentMousePosition=function(i,e,a){var t,r=i.pick(e);if(i.pickPositionSupported&&Cesium.defined(r)){var n=r.id;if(a==null||a&&n!==a){var t=i.pickPosition(e);if(Cesium.defined(t)){var s=Cesium.Cartographic.fromCartesian(t),c=s.height;if(c>=0||!Cesium.defined(r.id)&&c>=-500)return t}}}if(i.mode===Cesium.SceneMode.SCENE3D){var m=i.camera.getPickRay(e);t=i.globe.pick(m,i)}else t=i.camera.pickEllipsoid(e,i.globe.ellipsoid);return t};o.getCenter=function(i){var e=i.scene,a=p(e),t=a;if(!t){var r=e.globe,n=e.camera.positionCartographic.clone(),s=r.getHeight(n);n.height=s||0,t=Cesium.Ellipsoid.WGS84.cartographicToCartesian(n)}var c=o.formatPositon(t),m=Cesium.Cartesian3.distance(t,i.scene.camera.positionWC);return c.cameraZ=m,c};function p(i){var e=i.canvas,a=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight/2),t=i.camera.getPickRay(a),r=i.globe.pick(t,i);return r||i.camera.pickEllipsoid(a)}o.getExtent=function(i){var e={xmin:70,xmax:140,ymin:0,ymax:55},a=i.scene,t=a.globe.ellipsoid,r=a.canvas,n=i.camera.pickEllipsoid(new Cesium.Cartesian2(0,0),t);if(n){var s=t.cartesianToCartographic(n);e.xmin=Cesium.Math.toDegrees(s.longitude),e.ymax=Cesium.Math.toDegrees(s.latitude)}else{for(var c=r.width/2,m=r.height/2,l,h=0;h<=m;h+=10){var g=h<=c?h:c;if(l=i.camera.pickEllipsoid(new Cesium.Cartesian2(g,h),t),l)break}if(l){var s=t.cartesianToCartographic(l);e.xmin=Cesium.Math.toDegrees(s.longitude),e.ymax=Cesium.Math.toDegrees(s.latitude)}}var C=i.camera.pickEllipsoid(new Cesium.Cartesian2(r.width,r.height),t);if(C){var u=t.cartesianToCartographic(C);e.xmax=Cesium.Math.toDegrees(u.longitude),e.ymin=Cesium.Math.toDegrees(u.latitude)}else{for(var c=r.width/2,m=r.height/2,d,h=r.height;h>=m;h-=10){var g=h>=c?h:c;if(d=i.camera.pickEllipsoid(new Cesium.Cartesian2(g,h),t),d)break}if(d){var u=t.cartesianToCartographic(d);e.xmax=Cesium.Math.toDegrees(u.longitude),e.ymin=Cesium.Math.toDegrees(u.latitude)}}if(e.xmax<e.xmin){var v=e.xmax;e.xmax=e.xmin,e.xmin=v}if(e.ymax<e.ymin){var v=e.ymax;e.ymax=e.ymin,e.ymin=v}return e};o.getViewBounds=function(i){var e=i.camera.computeViewRectangle(),a=e.west/Math.PI*180,t=e.north/Math.PI*180,r=e.east/Math.PI*180,n=e.south/Math.PI*180,s={southwest:{lng:a,lat:n},northeast:{lng:r,lat:t}};return s};o.getCameraView=function(i){var e=i.camera,a=e.positionCartographic,t={};return t.y=Number(Cesium.Math.toDegrees(a.latitude).toFixed(6)),t.x=Number(Cesium.Math.toDegrees(a.longitude).toFixed(6)),t.z=Number(a.height.toFixed(1)),t.heading=Number(Cesium.Math.toDegrees(e.heading||-90).toFixed(1)),t.pitch=Number(Cesium.Math.toDegrees(e.pitch||0).toFixed(1)),t.roll=Number(Cesium.Math.toDegrees(e.roll||0).toFixed(1)),t};o.formatPositon=function(i){var e=Cesium.Cartographic.fromCartesian(i),a={};return a.y=Number(Cesium.Math.toDegrees(e.latitude).toFixed(6)),a.x=Number(Cesium.Math.toDegrees(e.longitude).toFixed(6)),a.z=Number(e.height.toFixed(1)),a};o.Cartesian3To=function(i,e){if(i){if(e){var a=e.scene.globe.ellipsoid,t;t=a.cartesianToCartographic(i)}else t=Cesium.Cartographic.fromCartesian(i);var r=Cesium.Math.toDegrees(t.latitude),n=Cesium.Math.toDegrees(t.longitude),s=t.height;return{cartesian3:i,cartographic:t,latlng:{lat:r,lng:n,height:s}}}};o.windingPoint={isStart:!1,__viewer:null,start:function(i,e){e||(e=o.getCenter(i)),this.__viewer=i,this.position=Cesium.Cartesian3.fromDegrees(e.x,e.y,e.z),this.distance=e.distance||Cesium.Cartesian3.distance(this.position,i.camera.positionWC),this.angle=360/(e.time||60),this.time=i.clock.currentTime.clone(),this.heading=i.camera.heading,this.pitch=i.camera.pitch,this.__viewer.clock.onTick.addEventListener(this.clock_onTickHandler,this),this.isStart=!0},clock_onTickHandler:function(i){var e=Cesium.JulianDate.secondsDifference(this.__viewer.clock.currentTime,this.time),a=Cesium.Math.toRadians(e*this.angle)+this.heading;this.__viewer.scene.camera.setView({destination:this.position,orientation:{heading:a,pitch:this.pitch}}),this.__viewer.scene.camera.moveBackward(this.distance)},stop:function(){!this.isStart||(this.__viewer&&this.__viewer.clock.onTick.removeEventListener(this.clock_onTickHandler,this),this.isStart=!1)}};o.aroundPoint={isStart:!1,__viewer:null,start:function(i,e){e||(e=o.getCenter(i)),this.__viewer=i,this.position=Cesium.Cartesian3.fromDegrees(e.x,e.y,e.z),this.angle=360/(e.time||60),this.time=i.clock.currentTime.clone(),this.heading=i.camera.heading,this.pitch=i.camera.pitch,this.__viewer.clock.onTick.addEventListener(this.clock_onTickHandler,this),this.isStart=!0},clock_onTickHandler:function(i){var e=Cesium.JulianDate.secondsDifference(this.__viewer.clock.currentTime,this.time),a=Cesium.Math.toRadians(e*this.angle)+this.heading;f.scene.camera.setView({orientation:{heading:a,pitch:this.pitch}})},stop:function(){!this.isStart||(this.__viewer&&this.__viewer.clock.onTick.removeEventListener(this.clock_onTickHandler,this),this.isStart=!1)}};export{o as l};
