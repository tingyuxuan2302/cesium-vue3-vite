import{o as m,b as u}from"./index.bc967ea1.js";const d={__name:"fence",setup(s){const{__viewer:a}=window;function n(e){let t=a.dataSources._dataSources.find(o=>o&&o.name==e);return t||(t=new Cesium.CustomDataSource(e),a.dataSources.add(t)),t}function r(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e.color||Cesium.Color.BLUE,this.duration=e.duration||1e3,this.trailImage=e.trailImage,this._time=new Date().getTime()}function l(e){if(e&&e.get){var t=`czm_material czm_getMaterial(czm_materialInput materialInput)
      {
          czm_material material = czm_getDefaultMaterial(materialInput);
          vec2 st = materialInput.st;`;return e.freely=="vertical"?t+="vec4 colorImage = texture(image, vec2(fract(st.s), fract(float("+e.count+")*st.t"+e.direction+` time)));
 `:t+="vec4 colorImage = texture(image, vec2(fract(float("+e.count+")*st.s "+e.direction+` time), fract(st.t)));
 `,t+=`vec4 fragColor;
          fragColor.rgb = (colorImage.rgb+color.rgb) / 1.0;
          fragColor = czm_gammaCorrect(fragColor);
          material.diffuse = colorImage.rgb;
          material.alpha = colorImage.a;
          material.emission = fragColor.rgb;
          return material;
      }`,t}}Object.defineProperties(r.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")});var i="wallType"+parseInt(Math.random()*1e3);r.prototype.getType=function(e){return i},r.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.image=this.trailImage,this.duration&&(t.time=(new Date().getTime()-this._time)%this.duration/this.duration),a.scene.requestRender(),t},r.prototype.equals=function(e){return this===e||e instanceof r&&Cesium.Property.equals(this._color,e._color)},Cesium.Material._materialCache.addMaterial(i,{fabric:{type:i,uniforms:{color:new Cesium.Color(1,0,0,.1),image:Cesium.Material.DefaultImageId,time:-20},source:l({get:!0,count:3,freely:"vertical",direction:"-"})},translucent:function(e){return!0}});function c(){let e=[[104.0185546875,30.66235300961486],[104.01589393615723,30.65652022496456],[104.029541015625,30.65053940942565],[104.0397548675537,30.65777541087788],[104.03829574584961,30.66604446357028],[104.0255069732666,30.667963963897005],[104.0185546875,30.66235300961486]],t=Array.prototype.concat.apply([],e);n("wall").entities.add({wall:{positions:Cesium.Cartesian3.fromDegreesArray(t),positions:Cesium.Cartesian3.fromDegreesArray(t),maximumHeights:new Array(e.length).fill(500),minimunHeights:new Array(e.length).fill(0),material:new r({trailImage:"/cesium-vue3-vite/images/wall.png",color:Cesium.Color.CYAN,duration:1500})}})}return c(),a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(104.02,30.655,5e3),duration:2}),(e,t)=>(m(),u("div"))}};export{d as default};
