import{_ as p}from"./OperateBox.5dea2f2a.js";import{o as C,c as g,w as o,d as c,e as _}from"./index.76f76e18.js";import{E as M}from"./el-button.46cdb001.js";class a{constructor(e){this._definitionChanged=new Cesium.Event,this._color=void 0,this.color=e.color}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(e){return Cesium.Material.WallDiffuseMaterialType}getValue(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrDefault(this._color,e,Cesium.Color.RED,t.color),t}equals(e){return this===e||e instanceof a&&Cesium.Property.equals(this._color,e._color)}}Object.defineProperties(a.prototype,{color:Cesium.createPropertyDescriptor("color")});Cesium.Material.WallDiffuseMaterialProperty="WallDiffuseMaterialProperty";Cesium.Material.WallDiffuseMaterialType="WallDiffuseMaterialType";Cesium.Material.WallDiffuseMaterialSource=`
  uniform vec4 color;
  czm_material czm_getMaterial(czm_materialInput materialInput){
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  material.diffuse = color.rgb * 2.0;
  material.alpha = color.a * (1.0-fract(st.t)) * 0.8;
  return material;
  }                                         
  `;Cesium.Material._materialCache.addMaterial(Cesium.Material.WallDiffuseMaterialType,{fabric:{type:Cesium.Material.WallDiffuseMaterialType,uniforms:{color:new Cesium.Color(1,0,0,1)},source:Cesium.Material.WallDiffuseMaterialSource},translucent:function(u){return!0}});class y{constructor(e){if(this._viewer=e.viewer,this._center=e.center,this._radius=e.radius||1e3,this._edge=e.edge||64,this._speed=e.speed||5,this._height=e.height||100,this._currentHeight=this._height,this._minRadius=e.minRadius||10,this._currentRadius=this._minRadius,this._edge<3)return!1;this.init()}_getPositions(e,t,s,r){let i=[],l=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(e[0],e[1],0));for(let n=0;n<t;n++){let m=n/t*Cesium.Math.TWO_PI,h=Math.cos(m),f=Math.sin(m),d=new Cesium.Cartesian3(h*s,f*s,r);i.push(Cesium.Matrix4.multiplyByPoint(l,d,new Cesium.Cartesian3))}return i.push(i[0]),i}init(){this._viewer.entities.add({wall:{positions:new Cesium.CallbackProperty(()=>{let e=[];return this._currentRadius+=this._radius*this._speed/1e3,this._currentHeight-=this._height*this._speed/1e3,(this._currentRadius>this._radius||this._currentHeight<0)&&(this._currentRadius=this._minRadius,this._currentHeight=this._height),e=this._getPositions(this._center,this._edge,this._currentRadius,this._currentHeight),e},!1),material:new a({color:new Cesium.Color(1,1,0,1)})}})}}const R={__name:"wallPolygonDiffuse",setup(u){const e=()=>{new y({viewer:window.__viewer,center:[113.9236839,22.528061],radius:1e3,edge:5,height:200,speed:15,minRadius:50}),window.__viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(113.9236839,22.528061,1e3)})},t=()=>{};return(s,r)=>{const i=M,l=p;return C(),g(l,null,{default:o(()=>[c(i,{type:"primary",onClick:e},{default:o(()=>r[0]||(r[0]=[_("\u5F00\u59CB")])),_:1}),c(i,{type:"primary",onClick:t},{default:o(()=>r[1]||(r[1]=[_("\u6E05\u9664")])),_:1})]),_:1})}}};export{R as default};
