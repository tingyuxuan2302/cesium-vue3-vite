import{_ as G}from"./OperateBox.0986405a.js";import{C as R,a as d,o as T,c as I,w as c,d as C,e as g}from"./index.fe5814f1.js";import{E as L}from"./el-button.af2fec77.js";import{g as y}from"./api.cf71c671.js";import"./request.6255f877.js";import"./axios.a5b46551.js";const j={__name:"colorLayer",setup(P){const{viewer:o}=window;R(()=>{o.scene.terrainProvider=new Cesium.EllipsoidTerrainProvider({})}),d(()=>{o.scene.terrainProvider=new Cesium.CesiumTerrainProvider({url:"http://data.marsgis.cn/terrain"})}),o.camera.setView({destination:Cesium.Cartesian3.fromDegrees(120.36,36.09,4e4)});const f=async()=>{const{res:t}=await y("/cesium-vue3-vite/json/qingdaoArea.geojson"),{res:e}=await y("/cesium-vue3-vite/json/areaPoint.geojson");A(t.features,e)},E=o.scene.primitives.add(new Cesium.LabelCollection),w=["AQUAMARINE","BEIGE","CORNFLOWERBLUE","DARKORANGE","GOLD","GREENYELLOW","LIGHTPINK","ORANGERED","YELLOWGREEN","TOMATO"],m=[],A=(t,e)=>{let n=[];for(let r=0;r<t.length;r++){const s=t[r];for(let i=0;i<s.geometry.coordinates.length;i++){const h=s.geometry.coordinates[i].toString().split(",").map(Number),O=new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(h)),vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,extrudedHeight:100}),v=Cesium.PolygonGeometry.createGeometry(O);n.push(new Cesium.GeometryInstance({id:`polygon-${r}`,geometry:v,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.fromAlpha(Cesium.Color[w[r]],.6)),show:new Cesium.ShowGeometryInstanceAttribute(!0)}}))}const u=e.features.find(i=>i.properties.ID==s.properties.id),_=Cesium.Cartesian3.fromDegrees(...u.geometry.coordinates,1500);m.push(u.geometry.coordinates),E.add({text:s.properties.name,font:"bold 15px Microsoft YaHei",blendOption:Cesium.BlendOption.TRANSLUCENT,position:_,verticalOrigin:Cesium.VerticalOrigin.CENTER,horizontalOrigin:Cesium.HorizontalOrigin.LEFT})}const a=new Cesium.Primitive({releaseGeometryInstances:!1,geometryInstances:n,appearance:new Cesium.PerInstanceColorAppearance({translucent:!0,closed:!1}),asynchronous:!1});o.scene.primitives.add(a)},l=()=>{o.scene.primitives.removeAll()},p=o.scene;return new Cesium.ScreenSpaceEventHandler(p.canvas).setInputAction(t=>{const e=p.pick(t.position);if(Cesium.defined(e)&&e.id.indexOf("polygon")>-1){const n=e.id.replace(/polygon-/g,"");console.log("xxx",e.id,e),o.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(...m[n],4e4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0},duration:2})}},Cesium.ScreenSpaceEventType.LEFT_CLICK),d(()=>{l()}),(t,e)=>{const n=L,a=G;return T(),I(a,null,{default:c(()=>[C(n,{type:"primary",onClick:f},{default:c(()=>e[0]||(e[0]=[g("\u5F00\u59CB")])),_:1}),C(n,{type:"primary",onClick:l},{default:c(()=>e[1]||(e[1]=[g("\u6E05\u9664")])),_:1})]),_:1})}}};export{j as default};
