import{l as R}from"./latlng.6bf76edf.js";import{G as _}from"./dat.gui.module.6914edc7.js";import{C as G,a as x,o as F,b as I}from"./index.76f76e18.js";const O={__name:"viewFrustum",setup(P){const{viewer:o}=window,e={x:120,y:30,z:2e3,heading:0,pitch:180,roll:0,fov:30,near:10,far:3e3,aspectRatio:1.4};let s,m,t;G(()=>{o.camera.setView({destination:Cesium.Cartesian3.fromDegrees(120,30,2e4)}),t=new _,t.domElement.style="position:absolute;top:10px;left:10px;",t.add(e,"x",-180,180).name("\u7ECF\u5EA6").onChange(a),t.add(e,"y",-90,90).name("\u7EAC\u5EA6").onChange(a),t.add(e,"z",100,1e4).name("\u9AD8\u5EA6").onChange(a),t.add(e,"heading",0,360).name("\u504F\u822A\u89D2-\u6C34\u5E73").onChange(a),t.add(e,"pitch",0,360).name("\u4FEF\u4EF0\u89D2-\u4E0A\u4E0B").onChange(a),t.add(e,"roll",0,360).name("\u7FFB\u6EDA\u89D2-\u4FA7\u5411").onChange(a),t.add(e,"fov",0,180).name("\u4E0A\u4E0B\u89D2\u5EA6").onChange(a),t.add(e,"near",0,1e3).name("\u8FD1\u8DDD").onChange(a),t.add(e,"far",0,5e3).name("\u8FDC\u8DDD").onChange(a),t.add(e,"aspectRatio",0,3).name("\u6A2A\u5411\u6BD4\u4F8B").onChange(a),y()}),x(()=>{t&&t.destroy(),s&&o.scene.primitives.remove(s),m&&o.scene.primitives.remove(m)});function y(){var n=Cesium.Cartesian3.fromDegrees(e.x,e.y,e.z),r=Cesium.Math.toRadians(e.heading),u=Cesium.Math.toRadians(e.pitch),l=Cesium.Math.toRadians(e.roll),c=new Cesium.HeadingPitchRoll(r,u,l),d=Cesium.Transforms.headingPitchRollQuaternion(n,c);C(n,d,e.fov,e.near,e.far,e.aspectRatio)}function a(){o.scene.primitives.remove(s),o.scene.primitives.remove(m);var n=Cesium.Cartesian3.fromDegrees(e.x,e.y,e.z),r=Cesium.Math.toRadians(e.heading),u=Cesium.Math.toRadians(e.pitch),l=Cesium.Math.toRadians(e.roll),c=new Cesium.HeadingPitchRoll(r,u,l),d=Cesium.Transforms.headingPitchRollQuaternion(n,c);C(n,d,e.fov,e.near,e.far,e.aspectRatio)}function C(n,r,u,l,c,d){let p=new Cesium.PerspectiveFrustum({fov:Cesium.Math.toRadians(u),aspectRatio:d,near:l,far:c}),h=new Cesium.GeometryInstance({geometry:new Cesium.FrustumGeometry({frustum:p,origin:n,orientation:r,vertexFormat:Cesium.VertexFormat.POSITION_ONLY}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.AQUA.withAlpha(.3))}}),w=new Cesium.GeometryInstance({geometry:new Cesium.FrustumOutlineGeometry({frustum:p,origin:n,orientation:r}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(1,1,1,1))}});s=new Cesium.Primitive({geometryInstances:[h],appearance:new Cesium.PerInstanceColorAppearance({closed:!0,flat:!0}),asynchronous:!1}),m=new Cesium.Primitive({geometryInstances:[w],appearance:new Cesium.PerInstanceColorAppearance({closed:!0,flat:!0}),asynchronous:!1}),o.scene.primitives.add(s),o.scene.primitives.add(m);const f=Cesium.FrustumOutlineGeometry.createGeometry(h.geometry).attributes.position.values,v=[];for(let i=0;i<f.length;i+=3)v.push(f.slice(i,i+3));const g=[];v.forEach(function(i){g.push(R.formatPositon(new Cesium.Cartesian3(i[0],i[1],i[2])))}),console.log("\u89C6\u9525\u4F53\u9876\u70B9\u5750\u6807\uFF1A",g)}return(n,r)=>(F(),I("div"))}};export{O as default};
